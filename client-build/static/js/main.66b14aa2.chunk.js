(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{109:function(e,t,a){},112:function(e,t,a){},113:function(e,t,a){},119:function(e,t){},120:function(e,t){},122:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a.n(c),o=a(13),s=a.n(o),r=(a(88),a(2)),i=a(3),l=(a(89),a(90),a(21)),d=a.n(l),j=a(0),b=Object(j.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"#ff0000",className:"bi bi-exclamation-circle",viewBox:"0 0 16 16",children:[Object(j.jsx)("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}),Object(j.jsx)("path",{d:"M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"})]}),u=function(e,t){var a=0;return Number(t.split("-")[1])<4&&(a=1),"".concat(e.split("-")[a],"-").concat(h(t))},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=e.split("-");return a.shift(),-1===t?[a[1],a[0]].join("-"):a.join("-")},O=function(e,t){var a=t.split("-"),c=Number(a[1]),n=e.split("-");return"".concat(c<4?n[1]:n[0],"-").concat([a[1],a[0]].join("-"))},m=function(e){var t={"01":"Jan","02":"Feb","03":"Mar","04":"Apr","05":"May","06":"Jun","07":"Jul","08":"Aug","09":"Sep",10:"Oct",11:"Nov",12:"Dec"};Object.freeze(t),console.log("test dbdate split: ",e);var a=e.split("-");return console.log("test utils: ",e,a),"".concat(a[0],"-").concat(t[a[1]])},p=a(130),x=a(131),f=a(81),g=a(138),v=a(132),y=a(135),C=a(136),N=a(65),k=a.n(N),D=k.a.create({headers:{"Content-Type":"application/json"},baseURL:"http://localhost:5000",timeout:6e4,cancelToken:k.a.CancelToken.source().token}),S=(a(109),a(79)),w=function(e){return console.log("show loader",e.show),Object(j.jsx)(y.a,{show:e.show,backdrop:"static",dialogClassName:"borderStyle",children:Object(j.jsx)(S.a,{className:"spinner",children:" "})})},_=n.a.memo(w),B=a(137),L=(a(112),function(e){var t=e.msg,a=e.success,n=e.setMsg,o=Object(c.useCallback)((function(){n("")}),[n]);return Object(c.useEffect)((function(){var e=setTimeout((function(){o(),clearTimeout(e)}),5e3);return function(){clearTimeout(e)}}),[t,o]),Object(c.useEffect)((function(){console.log("message.js: ",t,a,e)})),t?Object(j.jsx)("div",{className:"alertBox",children:Object(j.jsx)(B.a,{variant:a?"success":"danger",children:t})}):null}),A=n.a.memo(L),I=function(e){return function(t){var a=Object(c.useState)(!1),n=Object(i.a)(a,2),o=n[0],s=n[1],l=Object(c.useState)(""),d=Object(i.a)(l,2),b=d[0],u=d[1],h=Object(c.useState)(!0),O=Object(i.a)(h,2),m=O[0],p=O[1];return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(_,{show:o}),Object(j.jsx)(A,{msg:b,setMsg:u,success:m}),Object(j.jsx)(e,Object(r.a)(Object(r.a)({},t),{},{showLoader:o,setShowLoader:s,msg:b,setMsg:u,success:m,setSuccess:p}))]})}},T=function(e){var t=e.setShowLoader,a=e.setMsg,n=e.setSuccess,o=Object(c.useState)(!1),s=Object(i.a)(o,2),r=s[0],l=s[1],O=Object(c.useState)(!1),m=Object(i.a)(O,2),N=m[0],k=m[1],S=2015,w=(new Date).getFullYear(),_=Array(w-S+1).fill().map((function(e,t){return function(e){return"".concat(e,"-").concat(Number(e+1))}(S+t)})).reverse(),B=Object(c.useState)("".concat(w,"-").concat(w+1)),L=Object(i.a)(B,2),A=L[0],I=L[1],T=Object(c.useState)((new Date).toISOString().split("T")[0]),F=Object(i.a)(T,2),E=F[0],G=F[1],M=Object(c.useState)(!1),U=Object(i.a)(M,2),H=U[0],z=U[1],P=Object(c.useState)("narayan"),W=Object(i.a)(P,2),Y=W[0],R=W[1],J=Object(c.useState)("credit"),q=Object(i.a)(J,2),V=q[0],Q=q[1],Z=Object(c.useState)(0),K=Object(i.a)(Z,2),X=K[0],$=K[1],ee=Object(c.useState)(""),te=Object(i.a)(ee,2),ae=te[0],ce=te[1],ne=Object(c.useState)(!1),oe=Object(i.a)(ne,2),se=oe[0],re=oe[1],ie=Object(c.useRef)(!1),le=["narayan","savita","sakshi","arpan"],de=Object(c.useState)(""),je=Object(i.a)(de,2),be=je[0],ue=je[1],he=e.setFormData,Oe=Object(c.useCallback)((function(){var e={name:Y.toLowerCase(),year:A};he(e),re(!1)}),[Y,A,he]);Object(c.useEffect)((function(){ie.current||(ie.current=!0,Oe())}),[Oe]);var me=function(e,t){switch(t){case"year":I(e.target.id),G(u(e.target.id,E));break;case"name":R(e.target.id);break;case"direction":Q(e.target.id);break;default:return null}re(!0)},pe=Object(c.useState)(!1),xe=Object(i.a)(pe,2),fe=xe[0],ge=xe[1],ve=function(){return ge(!1)},ye=function(e){switch(e.target.id){case"formBasicDate":G(e.target.value),I(function(e){var t=e.split("-"),a=Number(t[0]);return Number(t[1])<4?(console.log("determineFy: ","".concat(a-1,"-").concat(a)),"".concat(a-1,"-").concat(a)):(console.log("determineFy: ","".concat(a,"-").concat(a+1)),"".concat(a,"-").concat(a+1))}(e.target.value)),console.log("selected date: ",e.target.value);break;case"formBasicNoDate":z(e.target.checked);break;case"formBasicName":R(e.target.value);break;case"formBasicAmount":var t=e.target.value;$(t);break;case"formBasicNarration":ce(e.target.value);break;default:Q(e.target.id)}},Ce="".concat(S,"-04-01"),Ne="".concat(w+1,"-03-31");return Object(j.jsxs)(p.a,{fluid:"lg",className:"p-5 bg-light",children:[Object(j.jsxs)(x.a,{className:d.a.rowHeight,children:[Object(j.jsxs)(f.a,{lg:4,children:[Object(j.jsx)(g.a,{children:Object(j.jsx)(g.a.Item,{style:{postion:"fixed"},children:Object(j.jsx)("input",{type:"text",onChange:function(e){ue(e.target.value.toString().toLowerCase())},value:be})})}),Object(j.jsxs)(g.a,{className:d.a.colHeight,children:["all".toString().includes(be)?Object(j.jsx)(g.a.Item,{id:"all",action:!0,onClick:function(e){return me(e,"year")},variant:"light",active:"all"===A,children:"ALL  "},"all"):null,_.map((function(e,t){return e.toString().includes(be)?Object(j.jsx)(g.a.Item,{id:e,action:!0,onClick:function(e){return me(e,"year")},variant:"light",active:A===e.toString(),children:e},t):null}))]})]}),Object(j.jsx)(f.a,{lg:4,children:Object(j.jsxs)(g.a,{children:[Object(j.jsx)(g.a.Item,{id:"narayan",action:!0,variant:"light",onClick:function(e){return me(e,"name")},active:"narayan"===Y,children:" Naryan"}),Object(j.jsx)(g.a.Item,{id:"savita",action:!0,variant:"light",onClick:function(e){return me(e,"name")},active:"savita"===Y,children:"Savita"}),Object(j.jsx)(g.a.Item,{id:"arpan",action:!0,variant:"light",onClick:function(e){return me(e,"name")},active:"arpan"===Y,children:"Arpan"}),Object(j.jsx)(g.a.Item,{id:"sakshi",action:!0,variant:"light",onClick:function(e){return me(e,"name")},active:"sakshi"===Y,children:"Sakshi"})]})}),Object(j.jsx)(f.a,{lg:4,children:Object(j.jsxs)(g.a,{children:[Object(j.jsx)(g.a.Item,{id:"credit",action:!0,variant:"light",onClick:function(e){return me(e,"direction")},active:"credit"===V,children:"Credit"}),Object(j.jsx)(g.a.Item,{id:"debit",action:!0,variant:"light",onClick:function(e){return me(e,"direction")},active:"debit"===V,children:"Debit"})]})})]}),Object(j.jsxs)(x.a,{children:[Object(j.jsx)(v.a,{variant:"outline-secondary",size:"lg",onClick:Oe,className:[d.a.button,se?d.a.blink:""].join(" "),children:"Get Data"}),Object(j.jsx)(v.a,{variant:"outline-secondary",size:"lg",onClick:function(){$(0),ce(""),z(!0),r&&l(!1),N&&k(!1),"all"===A&&(I("".concat(w,"-").concat(w+1)),G((new Date).toISOString().split("T")[0])),ge(!0)},className:d.a.button,children:"Enter New Data"})]}),Object(j.jsxs)(y.a,{show:fe,onHide:ve,className:d.a.modal,children:[Object(j.jsx)(y.a.Header,{closeButton:!0,children:Object(j.jsx)(y.a.Title,{children:"New Data Form"})}),Object(j.jsx)(y.a.Body,{children:Object(j.jsxs)(C.a,{children:[Object(j.jsxs)(C.a.Group,{className:"mb-3",controlId:"formBasicDate",children:[Object(j.jsx)(C.a.Label,{children:"Date"}),Object(j.jsx)(C.a.Control,{name:"date",type:"date",value:E,onChange:ye,min:Ce,max:Ne})]}),Object(j.jsx)(C.a.Group,{className:"mb-3",controlId:"formBasicNoDate",children:Object(j.jsx)(C.a.Check,{name:"noDate",label:"No Date",type:"checkbox",checked:H,onChange:ye})}),Object(j.jsxs)(C.a.Group,{className:"mb-3",controlId:"formBasicYear",children:[Object(j.jsx)(C.a.Label,{children:"Year"}),Object(j.jsx)(C.a.Control,{name:"year",type:"text",value:A,disabled:!0})]}),Object(j.jsxs)(C.a.Group,{className:"mb-3",controlId:"formBasicName",children:[Object(j.jsx)(C.a.Label,{children:"Name"}),Object(j.jsx)(C.a.Control,{name:"name",type:"text",defaultValue:Y.toUpperCase(),disabled:!0})]}),Object(j.jsxs)(C.a.Group,{controlId:"credit",children:[Object(j.jsx)(C.a.Label,{children:"Type"}),Object(j.jsx)(C.a.Check,{name:"direction",type:"radio",label:"Credit",checked:"credit"===V,onChange:ye})]}),Object(j.jsx)(C.a.Group,{className:"mb-3",controlId:"debit",children:Object(j.jsx)(C.a.Check,{name:"direction",type:"radio",label:"Debit",checked:"debit"===V,onChange:ye})}),Object(j.jsxs)(C.a.Group,{className:"mb-3",controlId:"formBasicAmount",children:[Object(j.jsx)(C.a.Label,{children:"Amount"}),Object(j.jsx)(C.a.Control,{type:"number",placeholder:"Enter amount",onChange:ye,value:Number(X)}),N?Object(j.jsxs)("div",{className:d.a.validationFail,children:[Object(j.jsxs)("span",{children:[" ",b," "]}),Object(j.jsx)("span",{children:" Amount must be greater than zero "})," "]}):null]}),Object(j.jsxs)(C.a.Group,{className:"mb-3",controlId:"formBasicNarration",children:[Object(j.jsx)(C.a.Label,{children:"Description"}),Object(j.jsx)(C.a.Control,{as:"textarea",placeholder:"Enter description",onChange:ye,value:ae}),r?Object(j.jsxs)("div",{className:d.a.validationFail,children:[Object(j.jsxs)("span",{children:[" ",b," "]}),Object(j.jsx)("span",{children:"Description must contain some descriptive text"})]}):null]})]})}),Object(j.jsxs)(y.a.Footer,{children:[Object(j.jsx)(v.a,{variant:"danger",onClick:ve,children:"Close"}),Object(j.jsx)(v.a,{variant:"primary",onClick:function(){if(le.includes(Y)&&Number(X)>0&&""!==ae.trim()?(N&&k(!1),r&&l(!1),1):(Number(X)<=0?k(!0):N&&k(!1),""===ae.trim()?l(!0):r&&l(!1),0)){var e={name:Y.toLowerCase(),year:A,date:h(E,-1),noDate:H,amount:Number(X),direction:V,description:ae};console.log("formData in controls = ",e),t(!0),D.post("/api/items",e).then((function(e){t(!1),console.log("control post successful: ",e),Oe(),ve(),re(!1),a("Entry added successfully ! Fetching updated table..."),n(!0)})).catch((function(e){t(!1),a("Entry could not be added. Please check your network connection"),n(!1),console.log("error is: ",e)}))}else console.log("validation failed")},children:"Save"})]})]})]})},F=I(n.a.memo(T)),E=a(14),G=a.n(E),M=a(27),U=a.n(M),H=Object(j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"#197e19",className:"bi bi-plus-circle-fill",viewBox:"0 0 16 16",children:Object(j.jsx)("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3v-3z"})}),z=a(83),P=a(134),W=function(e){var t=e.formData,a=t.name,n=t.year,o=t.direction,s=Object(c.useState)(),r=Object(i.a)(s,2),l=r[0],d=r[1],O=Object(c.useState)(0),m=Object(i.a)(O,2),p=m[0],x=m[1],f=Object(c.useState)(),g=Object(i.a)(f,2),y=g[0],N=g[1],k=Object(c.useState)(),S=Object(i.a)(k,2),w=S[0],_=S[1],B=Object(c.useState)(!0),L=Object(i.a)(B,2),A=L[0],I=L[1],T=Object(c.useState)(!1),F=Object(i.a)(T,2),E=F[0],G=F[1],M=Object(c.useState)(!1),W=Object(i.a)(M,2),Y=W[0],R=W[1],J=function(){document.body.click()},q=e.showLoader,V=e.setShowLoader,Q=e.success,Z=e.setMsg,K=e.setSuccess,X="".concat(n.split("-")[0],"-04-01"),$="".concat(n.split("-")[1],"-03-31");Object(c.useEffect)((function(){!q&&Q&&J()}),[q,Q]);var ee=function(t){if(t.preventDefault(),console.log("validationhandler hit"),p>0&&""!==l.trim()?(console.log("validation successful"),Y&&R(!1),E&&G(!1),1):(Number(p)<=0?(console.log("amount validation fail"),R(!0)):Y&&R(!1),""===l.trim()?(console.log("description error hit"),G(!0)):E&&G(!1),0)){var c={name:a,year:n,date:h(w,-1),noDate:A,description:l,amount:p,direction:y};V(!0),D.post("/api/items",c).then((function(t){console.log("item added: ",t),Z("Entry added successfully !"),K(!0),c.id=t.data.id,e.updateTableHandler("_","add",c)})).catch((function(e){Z("Entry could not be added. Please check your network connection"),K(!1),console.log(e)})).finally((function(){V(!1)}))}},te=function(e){switch(e.target.id){case"formBasicDate":_(e.target.value);break;case"formBasicNoDate":I(e.target.checked);break;case"formBasicAmount":var t=Number(e.target.value);console.log("amount is: ",t),x(t);break;case"formBasicNarration":d(e.target.value);break;default:N(e.target.id)}},ae=Object(j.jsxs)(z.a,{id:"popover-basic",className:U.a.popover,children:[Object(j.jsx)(z.a.Header,{as:"h3",children:"New Data Form"}),Object(j.jsx)(z.a.Body,{children:Object(j.jsxs)(C.a,{onSubmit:ee,children:[Object(j.jsxs)(C.a.Group,{className:"mb-3",controlId:"formBasicDate",children:[Object(j.jsx)(C.a.Label,{children:"Date"}),Object(j.jsx)(C.a.Control,{name:"date",type:"date",value:w,onChange:te,min:X,max:$})]}),Object(j.jsx)(C.a.Group,{className:"mb-3",controlId:"formBasicNoDate",children:Object(j.jsx)(C.a.Check,{name:"noDate",label:"No Date",type:"checkbox",checked:A,onChange:te})}),Object(j.jsxs)(C.a.Group,{controlId:"credit",children:[Object(j.jsx)(C.a.Label,{children:"Type"}),Object(j.jsx)(C.a.Check,{name:"direction",type:"radio",label:"Credit",checked:"credit"===y,onChange:te})]}),Object(j.jsx)(C.a.Group,{className:"mb-3",controlId:"debit",children:Object(j.jsx)(C.a.Check,{name:"direction",type:"radio",label:"Debit",checked:"debit"===y,onChange:te})}),Object(j.jsxs)(C.a.Group,{className:"mb-4",controlId:"formBasicAmount",children:[Object(j.jsx)(C.a.Label,{children:"Amount"}),Object(j.jsx)(C.a.Control,{type:"number",placeholder:"Enter amount",onChange:te,value:Number(p)}),Y?Object(j.jsxs)("div",{className:U.a.validationFail,children:[Object(j.jsxs)("span",{children:[" ",b," "]}),Object(j.jsx)("span",{children:" Amount must be greater than zero "})," "]}):null]}),Object(j.jsxs)(C.a.Group,{className:"mb-3",controlId:"formBasicNarration",children:[Object(j.jsx)(C.a.Label,{children:"Description"}),Object(j.jsx)(C.a.Control,{as:"textarea",placeholder:"Enter description",onChange:te,value:l}),E?Object(j.jsxs)("div",{className:U.a.validationFail,children:[Object(j.jsxs)("span",{children:[" ",b," "]}),Object(j.jsx)("span",{children:"Description must contain some descriptive text"})]}):null]}),Object(j.jsx)(v.a,{type:"submit",className:U.a.buttonGrp,variant:"success",onClick:ee,children:"Confirm"}),Object(j.jsx)(v.a,{className:[U.a.buttonGrp,U.a.buttonCancel].join(" "),onClick:J,variant:"danger",children:"Cancel"})]})})]});return Object(j.jsx)(P.a,{trigger:"click",rootClose:!q,transition:!0,placement:"right",onToggle:function(){x(0),d(""),N(o),I(!0),_(u(n,(new Date).toISOString().split("T")[0])),E&&G(!1),Y&&R(!1)},overlay:ae,children:Object(j.jsx)("span",{className:U.a.clickable,children:H})})},Y=a(28),R=a.n(Y),J=function(e){var t=e.formData,a=t.name,n=t.year,o=t.date,s=t.noDate,r=t.amount,l=t.description,d=t.direction,u=Object(c.useState)(),m=Object(i.a)(u,2),p=m[0],x=m[1],f=Object(c.useState)(),g=Object(i.a)(f,2),y=g[0],N=g[1],k=Object(c.useState)(),S=Object(i.a)(k,2),w=S[0],_=S[1],B=Object(c.useState)(),L=Object(i.a)(B,2),A=L[0],I=L[1],T=Object(c.useState)(),F=Object(i.a)(T,2),E=F[0],G=F[1],M=Object(c.useState)(!1),U=Object(i.a)(M,2),H=U[0],W=U[1],Y=Object(c.useState)(!1),J=Object(i.a)(Y,2),q=J[0],V=J[1],Q=Object(c.useState)(!1),Z=Object(i.a)(Q,2),K=Z[0],X=Z[1],$=function(){document.body.click()},ee=e.showLoader,te=e.setShowLoader,ae=e.success,ce=e.setMsg,ne=e.setSuccess;Object(c.useEffect)((function(){!ee&&ae&&$()}),[ee,ae]);var oe=function(t){if(t.preventDefault(),console.log("validationhandler hit"),y>0&&""!==p.trim()?(console.log("validation successful"),q&&V(!1),H&&W(!1),1):(Number(y)<=0?(console.log("amount validation fail"),V(!0)):q&&V(!1),""===p.trim()?(console.log("description error hit"),W(!0)):H&&W(!1),0)){var c={id:e.toUpdate,name:a,year:n,date:h(A,-1),noDate:E,description:p,amount:y,direction:w};te(!0),D.post("/api/items/".concat(e.toUpdate),c).then((function(t){console.log(t),ce("Updation successful !"),ne(!0),X(!0),e.updateTableHandler(e.toUpdate,"edit",c)})).catch((function(e){ce("Updation failed. Please check your network connection"),ne(!1),console.log(e)})).finally((function(){te(!1)}))}},se=function(e){switch(e.target.id){case"formBasicDate":I(e.target.value);break;case"formBasicNoDate":G(e.target.checked);break;case"formBasicAmount":var t=e.target.value.toString();N(t);break;case"formBasicNarration":x(e.target.value);break;default:_(e.target.id)}},re="".concat(n.split("-")[0],"-04-01"),ie="".concat(n.split("-")[1],"-03-31"),le=Object(j.jsxs)(z.a,{id:"popover-basic",className:R.a.popover,children:[Object(j.jsx)(z.a.Header,{as:"h3",children:"Edit form"}),Object(j.jsx)(z.a.Body,{children:Object(j.jsxs)(C.a,{onSubmit:oe,children:[Object(j.jsxs)(C.a.Group,{className:"mb-3",controlId:"formBasicDate",children:[Object(j.jsx)(C.a.Label,{children:"Date"}),Object(j.jsx)(C.a.Control,{name:"date",type:"date",value:A,onChange:se,min:re,max:ie})]}),Object(j.jsx)(C.a.Group,{className:"mb-3",controlId:"formBasicNoDate",children:Object(j.jsx)(C.a.Check,{name:"noDate",label:"No Date",type:"checkbox",checked:E,onChange:se})}),Object(j.jsxs)(C.a.Group,{controlId:"credit",children:[Object(j.jsx)(C.a.Label,{children:"Type"}),Object(j.jsx)(C.a.Check,{name:"direction",type:"radio",label:"Credit",checked:"credit"===w,onChange:se})]}),Object(j.jsx)(C.a.Group,{className:"mb-3",controlId:"debit",children:Object(j.jsx)(C.a.Check,{name:"direction",type:"radio",label:"Debit",checked:"debit"===w,onChange:se})}),Object(j.jsxs)(C.a.Group,{className:"mb-4",controlId:"formBasicAmount",children:[Object(j.jsx)(C.a.Label,{children:"Amount"}),Object(j.jsx)(C.a.Control,{type:"number",placeholder:"Enter amount",onChange:se,value:Number(y)}),q?Object(j.jsxs)("div",{className:R.a.validationFail,children:[Object(j.jsxs)("span",{children:[" ",b," "]}),Object(j.jsx)("span",{children:" Amount must be greater than zero "})," "]}):null]}),Object(j.jsxs)(C.a.Group,{className:"mb-3",controlId:"formBasicNarration",children:[Object(j.jsx)(C.a.Label,{children:"Description"}),Object(j.jsx)(C.a.Control,{as:"textarea",placeholder:"Enter description",onChange:se,value:p}),H?Object(j.jsxs)("div",{className:R.a.validationFail,children:[Object(j.jsxs)("span",{children:[" ",b," "]}),Object(j.jsx)("span",{children:"Description must contain some descriptive text"})]}):null]}),Object(j.jsx)(v.a,{type:"submit",className:R.a.buttonGrp,variant:"success",onClick:oe,children:"Update"}),Object(j.jsx)(v.a,{className:[R.a.buttonGrp,R.a.buttonCancel].join(" "),onClick:$,variant:"danger",children:"Cancel"})]})})]});return Object(j.jsx)(P.a,{trigger:"click",rootClose:!ee,transition:!0,placement:"right",onToggle:function(){K?X(!1):(console.log("datefull: ",O(n,o)),I(O(n,o)),G(s),N(r),x(l),_(d),H&&W(!1),q&&V(!1))},overlay:le,children:Object(j.jsx)(v.a,{className:R.a.button,variant:"primary",children:"Edit"})})},q=a(59),V=a.n(q),Q=function(e){var t=function(){document.body.click()},a=e.showLoader,c=e.setShowLoader,n=Object(j.jsxs)(z.a,{id:"popover-basic",className:V.a.popover,children:[Object(j.jsx)(z.a.Header,{as:"h3",children:"Confirm Deletion"}),Object(j.jsxs)(z.a.Body,{children:[Object(j.jsx)("p",{children:"Please confirm that you want to delete this entry: "}),Object(j.jsx)(v.a,{variant:"success",onClick:function(){c(!0),D.post("/api/items/".concat(e.toUpdate),Object(r.a)(Object(r.a)({},e.formData),{},{del:!0})).then((function(a){console.log(a),t(),e.updateTableHandler(e.toUpdate,"del")})).catch((function(e){console.log(e)})).finally((function(){c(!1)}))},children:"Confirm"}),Object(j.jsx)(v.a,{className:V.a.buttonCancel,onClick:t,variant:"danger",children:"Cancel"})]})]});return Object(j.jsx)(P.a,{trigger:"click",rootClose:!a,transition:!0,placement:"right",overlay:n,children:Object(j.jsx)(v.a,{className:V.a.button,variant:"danger",children:"Delete"})})},Z=(a(113),a(82),a(63)),K=(a(121),function(e){var t=e.name,a=e.year,c=e.creditData,n=e.debitData,o=e.extension,s=function(e){return'"'.concat(e,'"')},r=function(){var e=",,,,".concat(t.toUpperCase()," ").concat(a,",,,,\nCredit,,,,, Debit,,  \n S.No., Date, Description, Amount,, S.No., Date, Description, Amount\n");console.log(c);for(var o=e,r=0;r<(c.length>=n.length?c.length:n.length);r++)o+=(c[r]?"".concat(r+1,", ").concat(m(c[r].date),",").concat(s(c[r].description),",").concat(c[r].amount,",,"):",,,,,")+(n[r]?"".concat(r+1,", ").concat(m(n[r].date),",").concat(s(n[r].description),",").concat(n[r].amount,"\n"):",,,,\n");console.log("csvString: ",o);var i=new Blob([o],{type:"text/csv"}),l=window.URL.createObjectURL(i);console.log("url is: ",l),console.log("blob is: ",i);var d=document.createElement("a");d.setAttribute("hidden",""),d.setAttribute("href",l),d.setAttribute("download","".concat(t,"_").concat(a,".csv")),document.body.appendChild(d),d.click(),document.body.removeChild(d)},i=function(){for(var e=[],o=0;o<(c.length>=n.length?c.length:n.length);o++)e[o]=[],c[o]?(console.log("creditData[i]",c[o]),e[o].push("".concat(m(c[o].date)),c[o].description,"".concat(c[o].amount),"")):e[o].push("","","",""),n[o]?(console.log("debitData[i]",n[o]),e[o].push("".concat(m(n[o].date)),n[o].description,"".concat(n[o].amount),"")):e[o].push("","","","");var s=new Z.default("l","mm","a4");s.text("".concat(t.toUpperCase(),"_").concat(a),120,10),s.autoTable({head:[["","Credit","","","","Debit",""],["Date","Description","Amount","","Date","Description","Amount"]],body:e,theme:"grid",headStyles:{fontStyle:"bold",fontSize:12,fillColor:"#5e5959"},columnStyles:{0:{cellWidth:20},1:{cellWidth:90},2:{cellWidth:20},3:{cellWidth:1},4:{cellWidth:20},5:{cellWidth:90},6:{cellWidth:20}}}),s.save("".concat(t,"_").concat(a,".pdf"))};return Object(j.jsx)(v.a,{onClick:function(){"csv"===o?r():"pdf"===o&&i()},variant:"".concat("csv"===o?"primary":"dark"),children:"Download as ".concat(o.toUpperCase())})}),X=a(133),$=function(e){var t=Object(c.useState)([]),a=Object(i.a)(t,2),n=a[0],o=a[1],s=Object(c.useState)([]),r=Object(i.a)(s,2),l=r[0],d=r[1],b=Object(c.useState)([]),u=Object(i.a)(b,2),h=u[0],O=u[1],g=Object(c.useState)(null),v=Object(i.a)(g,2),y=v[0],C=v[1],N=Object(c.useState)(null),k=Object(i.a)(N,2),S=k[0],w=k[1],_=Object(c.useState)(0),B=Object(i.a)(_,2),L=B[0],A=B[1],I=Object(c.useState)(0),T=Object(i.a)(I,2),F=T[0],E=T[1],M=Object(c.useState)(!1),U=Object(i.a)(M,2),H=U[0],z=U[1],P=e.setShowLoader,Y=e.setMsg,R=e.setSuccess,q=e.showLoader,V=e.success,Z=e.setDeletedYear,$=e.formData,ee=$.year,te=$.name,ae=Object(c.useRef)(),ce=Object(c.useCallback)((function(t,a,c){var s=[];switch(console.log("data updated1"),a){case"del":if(console.log("data updated2"),!(s=n.filter((function(e,a){return e.id!==t}))).length){if(console.log("test del"),e.dataAll)return void Z(ee);z(!0)}Y("Deletion successful !"),R(!0),console.log("data updated3");break;case"edit":(s=n)[s.findIndex((function(e){return e.id===t}))]=c;break;case"add":(s=n).push(c),1===s.length&&H&&z(!1)}console.log("culprit temp is: ",s),o(s)}),[n,H,e.dataAll,Y,R,Z,ee]);return Object(c.useEffect)((function(){if(e.dataAll)return console.log("dataAll given"),void o(e.dataAll);console.log("updateTableHandler hit"),P(!0),D.get("/api/items",{params:{name:te,year:ee}}).then((function(e){P(!1),console.log("table result: ",e),Array.isArray(e.data)?e.data.length?(H&&z(!1),console.log("table updated"),o(e.data[0].entries)):z(!0):e.data.message&&(Y("Could not load data. Please check your network connection"),console.log("error in then is: ",e.data.message,ee),R(!1))})).catch((function(e){P(!1),Y("Could not load data. Please check your network connection"),console.log("error in catch is: ",e,ee),R(!1)}))}),[e.formData,e.dataAll,te,Y,P,R,ee,H]),Object(c.useEffect)((function(){var e=[],t=[];console.log("second effect");var a=0,c=0,o=0,s=0;console.log("culprit data: ",n);var r=n.map((function(t,c){return console.log("item: ",t),"credit"===t.direction?(a+=1,e.push(t),o+=t.amount,t.year=ee,t.name=te,Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:a}),Object(j.jsx)("td",{className:G.a.date,children:t.noDate?null:m(t.date)}),Object(j.jsx)("td",{className:G.a.description,children:t.description}),Object(j.jsx)("td",{children:t.amount}),Object(j.jsxs)("td",{className:G.a.actions,children:[Object(j.jsx)(J,{formData:t,toUpdate:t.id,showLoader:q,setShowLoader:P,setMsg:Y,setSuccess:R,success:V,updateTableHandler:ce}),Object(j.jsx)(Q,{formData:t,toUpdate:t.id,showLoader:q,setShowLoader:P,setMsg:Y,setSuccess:R,updateTableHandler:ce})]})]},c)):null})),i=n.map((function(e,a){return console.log("item: ",e),"debit"===e.direction?(c+=1,t.push(e),s+=e.amount,e.year=ee,e.name=te,Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:c}),Object(j.jsx)("td",{children:e.noDate?null:m(e.date)}),Object(j.jsx)("td",{className:G.a.description,children:e.description}),Object(j.jsx)("td",{children:e.amount}),Object(j.jsxs)("td",{className:G.a.actions,children:[Object(j.jsx)(J,{formData:e,toUpdate:e.id,showLoader:q,setShowLoader:P,setMsg:Y,setSuccess:R,success:V,updateTableHandler:ce}),Object(j.jsx)(Q,{formData:e,toUpdate:e.id,showLoader:q,setShowLoader:P,setMsg:Y,setSuccess:R,updateTableHandler:ce})]})]},a)):null}));C(r),w(i),d(e),O(t),A(o),E(s)}),[n,te,ee,ce,H,Y,P,R,q,V]),n.length||H&&!e.dataAll?Object(j.jsxs)(p.a,{fluid:!0,className:"bg-light",ref:ae,id:"printable",children:[Object(j.jsx)(x.a,{className:"pt-5 ps-5 pe-5  col-lg-11",children:Object(j.jsx)(f.a,{className:G.a.year,children:ee})}),H?Object(j.jsx)(x.a,{className:"pt-5 ps-5 pe-5  col-lg-11",children:Object(j.jsx)(f.a,{className:G.a.noDataStyles,children:"No entries for this year."})}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(x.a,{className:"ps-5 pe-5 col-lg-11",children:[Object(j.jsxs)(X.a,{striped:!0,bordered:!0,hover:!0,className:G.a.tableWidth,children:[Object(j.jsxs)("thead",{children:[Object(j.jsx)("tr",{children:Object(j.jsx)("th",{colSpan:"5",children:"Credit"})}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"#"}),Object(j.jsx)("th",{children:"Date"}),Object(j.jsx)("th",{children:"Description"}),Object(j.jsx)("th",{children:"Amount"}),Object(j.jsx)("th",{children:"Actions"})]})]}),Object(j.jsxs)("tbody",{children:[y,Object(j.jsx)("tr",{children:Object(j.jsxs)("td",{colSpan:"5",children:["       ",Object(j.jsx)(W,{formData:{name:te,year:ee,direction:"credit"},showLoader:q,setShowLoader:P,setMsg:Y,setSuccess:R,success:V,updateTableHandler:ce})]})})]})]}),Object(j.jsxs)(X.a,{striped:!0,bordered:!0,hover:!0,className:G.a.tableWidth,children:[Object(j.jsxs)("thead",{children:[Object(j.jsx)("tr",{children:Object(j.jsx)("th",{colSpan:"5",children:"Debit"})}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"#"}),Object(j.jsx)("th",{children:"Date"}),Object(j.jsx)("th",{children:"Description"}),Object(j.jsx)("th",{children:"Amount"}),Object(j.jsx)("th",{children:"Actions"})]})]}),Object(j.jsxs)("tbody",{children:[S,Object(j.jsx)("tr",{children:Object(j.jsxs)("td",{colSpan:"5",children:["        ",Object(j.jsx)(W,{formData:{name:te,year:ee,direction:"debit"},showLoader:q,setShowLoader:P,setMsg:Y,setSuccess:R,success:V,updateTableHandler:ce})]})})]})]})]}),Object(j.jsx)(x.a,{className:"pt-5 ps-5 pe-5  col-lg-11",children:Object(j.jsxs)(X.a,{striped:!0,bordered:!0,hover:!0,className:G.a.tableWidth,children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Total Credit"}),Object(j.jsx)("th",{children:"Total Debit"}),Object(j.jsx)("th",{children:"Difference (I - O)"})]})}),Object(j.jsx)("tbody",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:L}),Object(j.jsx)("td",{children:F}),Object(j.jsx)("td",{children:L-F})]})})]})}),Object(j.jsx)(X.a,{className:G.a.tableWidth,children:Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:Object(j.jsx)(K,{name:te,year:ee,extension:"csv",creditData:l,debitData:h})}),Object(j.jsx)("th",{children:Object(j.jsx)(K,{name:te,year:ee,extension:"pdf",refContainer:ae,creditData:l,debitData:h})})]})})})]})]}):null},ee=I(n.a.memo($));var te=I((function(e){console.log("app hit");var t=Object(c.useState)({name:"",year:""}),a=Object(i.a)(t,2),n=a[0],o=a[1],s=Object(c.useState)([]),l=Object(i.a)(s,2),d=l[0],b=l[1],u=Object(c.useState)(!1),h=Object(i.a)(u,2),O=h[0],m=h[1],p=Object(c.useState)(""),g=Object(i.a)(p,2),v=g[0],y=g[1],C=Object(c.useRef)(!1),N=e.setShowLoader,k=e.setMsg,S=e.setSuccess,w=e.showLoader;return Object(c.useEffect)((function(){"all"===n.year&&function(e,t){console.log("getalldata hit"),y(""),N(!0),D.get("/api/items",{params:{name:e,year:t}}).then((function(a){if(console.log("response is: ",a.data,e,t),Array.isArray(a.data)){var c=a.data;c.length?(c.sort((function(e,t){return-(Number(e.year.split("-")[0])-Number(t.year.split("-")[0]))})),b(c),O&&m(!1)):m(!0)}else a.data.message&&(k("Could not load data. Please check your network connection"),console.log("error in then is: ",a.data.message,t),S(!1))})).catch((function(e){k("Could not load data. Please check your network connection"),console.log("error in catch is: ",e,t),S(!1)})).finally((function(){N(!1)}))}(n.name,n.year)}),[n,k,S,N,O]),Object(c.useEffect)((function(){if(C.current){if(v){var e=d.filter((function(e,t){return e.year!==v}));e.length?b(e):(console.log("culprit ???"),m(!0)),k("Deletion successful !"),S(!0)}}else C.current=!0}),[k,S,v,d]),console.log("culprit app rendered"),Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(F,{setFormData:function(e){console.log("stateupdatehandler app.js",d,O),o(e)}}),Object(j.jsx)("div",{className:"nameStyle",children:n.name.toUpperCase()}),"all"!==n.year||w?n.year&&!w?Object(j.jsx)(ee,{formData:n}):null:O?Object(j.jsx)(x.a,{className:"pt-5 ps-5 pe-5  col-lg-11",children:Object(j.jsx)(f.a,{className:"noDataStyles",children:"No entries for this person."})}):d.map((function(e,t){return Object(j.jsx)(ee,{formData:Object(r.a)(Object(r.a)({},n),{},{year:e.year}),dataAll:e.entries,setDeletedYear:y},t)}))]})})),ae=function(e){e&&e instanceof Function&&a.e(6).then(a.bind(null,272)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,o=t.getLCP,s=t.getTTFB;a(e),c(e),n(e),o(e),s(e)}))};s.a.render(Object(j.jsx)(n.a.StrictMode,{children:Object(j.jsx)(te,{})}),document.getElementById("root")),ae()},14:function(e,t,a){e.exports={tableWidth:"TableYear_tableWidth__1hFki",description:"TableYear_description__MFFbr",actions:"TableYear_actions__28xMq",year:"TableYear_year__1_sM0",noDataStyles:"TableYear_noDataStyles__2luap"}},21:function(e,t,a){e.exports={colHeight:"Controls_colHeight__2wz1l",rowHeight:"Controls_rowHeight__UVIkB",button:"Controls_button__2wP27",blink:"Controls_blink__P_kfe",validationFail:"Controls_validationFail__3lf5P",notAllowed:"Controls_notAllowed__2l3Ye"}},27:function(e,t,a){e.exports={buttonGrp:"AddButton_buttonGrp__2hWq7",buttonCancel:"AddButton_buttonCancel__2nupQ",popover:"AddButton_popover__N1Zhs",validationFail:"AddButton_validationFail__3unDa",clickable:"AddButton_clickable__3_dz0"}},28:function(e,t,a){e.exports={button:"EditButton_button__tL8uM",buttonGrp:"EditButton_buttonGrp__25GgM",buttonCancel:"EditButton_buttonCancel__2UOEF",popover:"EditButton_popover__1_PlU",validationFail:"EditButton_validationFail__308Le"}},59:function(e,t,a){e.exports={button:"DeleteButton_button__3Bw2I",buttonCancel:"DeleteButton_buttonCancel__3EBmO",popover:"DeleteButton_popover__1_xMj"}},77:function(e,t){},88:function(e,t,a){},89:function(e,t,a){}},[[122,1,3]]]);
//# sourceMappingURL=main.66b14aa2.chunk.js.map